<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate Way - Donate with Pi Network</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f0ff 0%, #e6d9ff 100%);
            margin: 0;
            min-height: 100vh;
            color: #4a148c;
        }
        .container { max-width: 1100px; margin: 30px auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 50px; position: relative; }
        #lang-switch {
            position: absolute; top: 10px; right: 10px;
            background: #7e57c2; color: white; border: none;
            padding: 10px 20px; border-radius: 50px; cursor: pointer;
        }
        .logo { font-size: 90px; color: #7e57c2; animation: float 3s ease-in-out infinite; }
        @keyframes float { 50% { transform: translateY(-10px); } }
        h1 { font-size: 38px; margin: 10px 0; }
        p.intro { font-size: 19px; max-width: 800px; margin: auto; }
        #user { font-size: 23px; font-weight: bold; margin-top: 20px; }

        .campaigns { display: grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap: 30px; }

        .campaign-card {
            background: #fff; border-radius: 24px;
            padding: 30px; text-align: center;
            box-shadow: 0 10px 30px rgba(126,87,194,.2);
        }

        .icon { font-size: 60px; margin-bottom: 15px; }
        .campaign-title { font-size: 26px; margin-bottom: 10px; }
        .campaign-desc { font-size: 16px; margin-bottom: 20px; }

        .donate-options { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .amount-btn {
            background: #ede7f6; border: 2px solid #b39ddb;
            padding: 8px 16px; border-radius: 50px;
            cursor: pointer;
        }
        .amount-btn.selected { background: #7e57c2; color: white; }

        .custom-amount { margin: 20px 0; display: flex; gap: 10px; justify-content: center; }
        .custom-input {
            padding: 10px; border-radius: 50px;
            border: 2px solid #b39ddb; width: 160px; text-align: center;
        }

        button.donate {
            width: 100%; padding: 15px;
            background: linear-gradient(135deg,#9c27b0,#7e57c2);
            border: none; border-radius: 50px;
            color: white; font-size: 18px; cursor: pointer;
        }

        footer { margin: 60px 0 20px; text-align: center; opacity: .8; }
    </style>
</head>

<body>
<div class="container">
    <div class="header">
        <button id="lang-switch">Switch to Arabic</button>
        <div class="logo">Ï€</div>
        <h1>Donate Way</h1>
        <p class="intro"></p>
        <div id="user"></div>
    </div>

    <div id="campaigns" class="campaigns"></div>

    <footer></footer>
</div>

<script>
Pi.init({ version: "2.0" });

let currentLang = navigator.language.startsWith('ar') ? 'ar' : 'en';
let currentUsername = null;
let selectedAmounts = {};

const translations = {
    en: {
        intro: "Donate with Pi Network to support humanitarian campaigns",
        userLoading: "Authenticating via Pi...",
        userGuest: "Donate as Guest",
        userGreeting: "Welcome, {name} ðŸ‘‹",
        footer: "Donate Way Â© 2025 - Powered by Pi Network",
        donateButton: "Donate Now {amount} Pi",
        customPlaceholder: "Custom amount",
        customButton: "Apply",
        campaigns: [
            { title: "Food Aid", desc: "Provide meals for families", icon: "ðŸ²" },
            { title: "Education", desc: "Support children's education", icon: "ðŸ“š" },
            { title: "Medical Care", desc: "Help patients get treatment", icon: "ðŸ¥" },
            { title: "Clean Water", desc: "Provide clean water", icon: "ðŸ’§" }
        ]
    },
    ar: {
        intro: "ØªØ¨Ø±Ø¹ Ø¨Ø¹Ù…Ù„Ø© Pi Network Ù„Ø¯Ø¹Ù… Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©",
        userLoading: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± Pi...",
        userGuest: "ØªØ¨Ø±Ø¹ ÙƒØ²Ø§Ø¦Ø±",
        userGreeting: "Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {name} ðŸ‘‹",
        footer: "Donate Way Â© 2025 - Ù…Ø¯Ø¹ÙˆÙ… Ù…Ù† Pi Network",
        donateButton: "ØªØ¨Ø±Ø¹ Ø§Ù„Ø¢Ù† Ø¨Ù€ {amount} Pi",
        customPlaceholder: "Ù…Ø¨Ù„Øº Ù…Ø®ØµØµ",
        customButton: "ØªÙØ¹ÙŠÙ„",
        campaigns: [
            { title: "Ù…Ø³Ø§Ø¹Ø¯Ø© ØºØ°Ø§Ø¦ÙŠØ©", desc: "ØªÙˆÙÙŠØ± ÙˆØ¬Ø¨Ø§Øª Ù„Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ø­ØªØ§Ø¬Ø©", icon: "ðŸ²" },
            { title: "Ø§Ù„ØªØ¹Ù„ÙŠÙ…", desc: "Ø¯Ø¹Ù… ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø·ÙØ§Ù„", icon: "ðŸ“š" },
            { title: "Ø±Ø¹Ø§ÙŠØ© Ø·Ø¨ÙŠØ©", desc: "Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰", icon: "ðŸ¥" },
            { title: "Ù…ÙŠØ§Ù‡ Ù†Ø¸ÙŠÙØ©", desc: "ØªÙˆÙÙŠØ± Ù…ÙŠØ§Ù‡ Ø´Ø±Ø¨", icon: "ðŸ’§" }
        ]
    }
};

document.documentElement.lang = currentLang;
document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';

async function initApp() {
    document.getElementById('user').textContent = translations[currentLang].userLoading;

    try {
        const user = await Pi.authenticate(['username']);
        currentUsername = user?.username || null;
    } catch {
        currentUsername = null;
    }

    document.getElementById('user').textContent =
        currentUsername
            ? translations[currentLang].userGreeting.replace('{name}', currentUsername)
            : translations[currentLang].userGuest;

    document.querySelector('.intro').textContent = translations[currentLang].intro;
    document.querySelector('footer').textContent = translations[currentLang].footer;

    const container = document.getElementById('campaigns');
    container.innerHTML = '';

    translations[currentLang].campaigns.forEach((c, i) => {
        selectedAmounts[i] = 10;
        const card = document.createElement('div');
        card.className = 'campaign-card';

        card.innerHTML = `
            <div class="icon">${c.icon}</div>
            <h2 class="campaign-title">${c.title}</h2>
            <p class="campaign-desc">${c.desc}</p>

            <div class="donate-options">
                ${[5,10,50,100].map(v => `<button class="amount-btn ${v===10?'selected':''}" data-val="${v}">${v} Pi</button>`).join('')}
            </div>

            <div class="custom-amount">
                <input type="number" class="custom-input" placeholder="${translations[currentLang].customPlaceholder}">
                <button class="amount-btn custom-btn">${translations[currentLang].customButton}</button>
            </div>

            <button class="donate">${translations[currentLang].donateButton.replace('{amount}',10)}</button>
        `;

        container.appendChild(card);

        card.querySelectorAll('.amount-btn[data-val]').forEach(btn=>{
            btn.onclick=()=>{
                card.querySelectorAll('.amount-btn[data-val]').forEach(b=>b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedAmounts[i]=btn.dataset.val;
                card.querySelector('.donate').textContent =
                    translations[currentLang].donateButton.replace('{amount}',selectedAmounts[i]);
            };
        });
    });
}

initApp();
</script>
</body>
</html>
