:root{
  --p:#7B2FF7;
  --p2:#9B6DFF;
  --bg:#F6F3FF;
  --card:#FFFFFF;
  --text:#1F1F2E;
  --mut:#6B6B85;
  --border:#E6E0FF;
  --shadow: 0 14px 34px rgba(123,47,247,.12);
  --r:20px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Tajawal",system-ui;
  color:var(--text);
  background:
    radial-gradient(1200px 500px at 20% -10%, rgba(123,47,247,.12), transparent 60%),
    radial-gradient(1200px 500px at 80% 0%, rgba(155,109,255,.12), transparent 60%),
    var(--bg);
}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:20;
  background: linear-gradient(135deg, var(--p) 0%, var(--p2) 100%);
  color:#fff;
  padding:14px 14px;
  box-shadow:0 12px 26px rgba(0,0,0,.12);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.brand{display:flex;align-items:center;gap:12px}
.logo{
  width:46px;height:46px;border-radius:16px;
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.22);
  display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:18px;
}
.brand h1{margin:0;font-size:18px}
.brand p{margin:2px 0 0;opacity:.92;font-size:13px}
.actions{display:flex;align-items:center;gap:10px}
.chip{
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.22);
  padding:8px 12px;
  border-radius:999px;
  font-size:13px;
  white-space:nowrap;
}

/* Layout */
.wrap{
  max-width:1100px;
  margin:0 auto;
  padding:16px 14px 60px;
  display:grid;
  gap:14px;
}

/* Hero */
.heroCard{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:calc(var(--r) + 6px);
  box-shadow:var(--shadow);
  padding:16px;
}
.heroHead{
  display:flex; justify-content:space-between; align-items:flex-start;
  gap:10px; flex-wrap:wrap;
}
.heroCard h2{margin:0 0 8px;font-size:20px}
.muted{color:var(--mut)}
.heroStats{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px;
  margin-top:12px;
}
.stat{
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
  background:#fff;
}
.statNum{font-size:18px;font-weight:800}
.statText{margin-top:4px;color:var(--mut);font-size:13px}

/* Search Input */
.searchWrap{
  max-width: 600px;
  margin: 0 auto;
  position: relative;
  width: 100%;
}
.searchWrap input{
  width: 100%;
  padding: 14px 18px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: #fff;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  font-family: inherit;
  font-size: 16px;
  outline: none;
  transition: all 0.2s;
}
.searchWrap input:focus{
  border-color: var(--p);
  box-shadow: 0 4px 16px rgba(123,47,247,0.15);
}

/* Section */
.sectionHead h3{margin:0;font-size:16px}
.sectionHead p{margin:4px 0 0;font-size:13px}

/* Grid */
.grid{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:12px;
}

/* Cards */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--r);
  padding:14px;
  box-shadow:var(--shadow);
  transition: transform .12s ease, box-shadow .12s ease;
  overflow:hidden;
}
.card:hover{transform:translateY(-2px)}
.card h3{margin:0 0 8px;font-size:16px}
.card p{margin:6px 0;color:var(--mut);font-size:14px}

.cardTop{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}

.cardActions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
  align-items:center;
}

/* Progress Bar */
.progressWrap{
  background: #f0eff5;
  height: 6px; 
  border-radius: 99px;
  margin-top: 12px; 
  overflow: hidden;
  width: 100%;
}
.progressBar{
  height: 100%; 
  background: linear-gradient(90deg, var(--p), var(--p2));
  border-radius: 99px;
  transition: width 0.5s ease;
}

/* Badges */
.badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
  border:1px solid var(--border);
  background:#fff;
  color:var(--mut);
  font-weight: 600;
}
.badge.ok{color:#0b7a2a;border-color:rgba(11,122,42,.22);background:rgba(11,122,42,.06)}
.badge.pi{color:#9a5b00;border-color:rgba(154,91,0,.22);background:rgba(154,91,0,.06)}

/* Buttons */
.btn{
  border:0;
  border-radius:12px;
  padding:10px 14px;
  font-weight:700;
  cursor:pointer;
  transition: transform .08s ease, filter .2s ease;
  font-family: inherit;
}
.btn:active{transform:scale(.98)}
.primary{
  background:linear-gradient(135deg, var(--p) 0%, var(--p2) 100%);
  color:#fff;
  box-shadow: 0 4px 12px rgba(123,47,247,0.25);
}
.ghost{
  background:#fff;
  border:1px solid var(--border);
  color:var(--text);
}
.soft{
  background: rgba(123,47,247,.10);
  border:1px solid rgba(123,47,247,.18);
  color:var(--p);
}
.btn.sm{
  padding: 6px 12px;
  font-size: 13px;
  border-radius: 8px;
}
.btn[disabled]{opacity:.55;cursor:not-allowed}

/* Fancy button for "عرض الدورات" */
.btnExpand{
  position:relative;
  overflow:hidden;
}
.btnExpand::after{
  content:"";
  position:absolute;
  inset:-2px;
  background: radial-gradient(120px 80px at 20% 30%, rgba(255,255,255,.35), transparent 60%);
  opacity:.0;
  transition:opacity .18s ease;
}
.btnExpand:hover::after{opacity:.9}

/* Cycles panel */
.panel{
  margin-top:12px;
  border-top:1px dashed var(--border);
  padding-top:12px;
  display:grid;
  gap:10px;
}

.cycleCard{
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  background:#fff;
}

.cycleHead{
  display:flex;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
  align-items:flex-start;
}

.slotGrid{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:10px;
}

.slotBtn{
  flex: 1 0 30%;
  min-width:100px;
  text-align:center;
}

/* Modals */
.modal{
  position: fixed; inset:0; z-index: 100;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(4px);
  display:none;
  align-items:center; justify-content:center;
  padding:14px;
}
.modal.active{display:flex; animation: fadeIn .2s ease both}
.modalContent{
  background: #fff;
  width: 100%; max-width: 500px;
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.2);
  max-height: 85vh;
  display:flex; flex-direction:column;
}
.modalHead{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:15px; border-bottom:1px solid var(--border); padding-bottom:10px;
}
.modalHead h3{margin:0; font-size:18px}
.modalBody{overflow-y:auto; padding-right:4px}
.text-content p{line-height:1.6; color:var(--text); margin-bottom:8px; font-size:14px}

@keyframes fadeIn{from{opacity:0} to{opacity:1}}

/* Toasts */
.toasts{
  position:fixed;
  inset:auto 12px 12px 12px;
  display:grid;
  gap:10px;
  z-index:150;
  pointer-events:none;
}
.toast{
  pointer-events:auto;
  background:#111827;
  color:#fff;
  border-radius:12px;
  padding:12px 14px;
  box-shadow:0 16px 40px rgba(0,0,0,.22);
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:flex-start;
  animation: toastIn .18s ease both;
}
.toast .tTitle{font-weight:800;margin:0 0 4px;font-size:14px}
.toast .tMsg{margin:0;opacity:.92;font-size:13px;line-height:1.5}
.toast .tClose{background:transparent;border:0;color:#fff;opacity:.7;cursor:pointer;font-size:16px}
.toast.success{background:#0b7a2a}
.toast.error{background:#b42318}
.toast.info{background:#111827}
@keyframes toastIn{
  from{transform:translateY(8px);opacity:0}
  to{transform:translateY(0);opacity:1}
}

@media (max-width: 980px){
  .grid{grid-template-columns:repeat(2,1fr)}
  .heroStats{grid-template-columns:1fr}
}
@media (max-width: 560px){
  .grid{grid-template-columns:1fr}
  .brand p{display:none}
}
